{% for item in items %}
<div class="string-item" data-key="{{ item.key }}">
    <div class="string-content">
        <div class="string-key">{{ item.key }}</div>
        <div class="string-value truncate">{{ item.value }}</div>
        <div class="string-meta">
            {{ t('created_time') }}: {{ item.created_at | datetime }}
        </div>
        {% if item.updated_at != item.created_at %}
        <div class="string-meta updated-time">
            {{ t('updated_time') }}: {{ item.updated_at | datetime }}
        </div>
        {% endif %}
        <div class="string-tags-container">
            <div class="tags-list">
                {% for tag in item.tags %}
                    <span class="tag-item">
                        {{ tag }}
                        <button class="delete-tag-btn" data-tag="{{ tag }}" title="删除标签">&times;</button>
                    </span>
                {% endfor %}
            </div>
            <form class="add-tag-form">
                <input type="text" class="add-tag-input" placeholder="{{ t('add_tag') }}..." list="all-tags-list">
                <button type="submit" class="btn-add-tag">{{ t('add_tag') }}</button>
            </form>
        </div>
    </div>
    <div class="actions">
        <button class="btn copy-btn" title="{{ t('copy_btn') }}">
            <span>📋</span>
            {{ t('copy_btn') }}
        </button>
        <button class="btn preview-btn" type="button" title="{{ t('expand_btn') }}/{{ t('collapse_btn') }}">
            <span>👁️</span>
            {{ t('expand_btn') }}
        </button>
        <button type="button" class="btn btn-danger delete-btn" data-key="{{ item.key }}">
            <span>🗑️</span>
            {{ t('delete_btn') }}
        </button>
    </div>
</div>
{% else %}
<p class="no-items">{{ t('no_items') }}</p>
{% endfor %}

{% if total_pages > 1 %}
<div class="pagination">
    {% for p in range(1, total_pages + 1) %}
        <a href="{{ url_for('main.index', page=p, search=search_query, tag=current_tag) }}"
           class="{{ 'active' if p == page else '' }}">
            {{ p }}
        </a>
    {% endfor %}
</div>
{% endif %}
